<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Редактирование объявления SELLIX</title>
</head>
<body>
<h1>SELLIX</h1>
<h2>Редактировать объявление</h2>

<div th:each="announcementImage : ${images}">
    <img th:src="@{/announcements/{id}/image(id=${announcementImage.id})}" alt="Изображение объявления">
</div>

<form th:action="@{/announcements/{id}(id=${announcementRequest.id})}" th:method="post" th:object="${announcementRequest}" enctype="multipart/form-data">
    <input type="hidden" name="_method" value="patch">
    <div>
        <label for="title">Заголовок:</label>
        <input id="title" type="text" th:field="*{title}" required>
        <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}">
            Ошибка заголовка
        </div>
    </div>
    <div>
        <label for="description">Описание:</label>
        <input id="description" type="text" th:field="*{description}" required>
        <div th:if="${#fields.hasErrors('description')}" th:errors="*{description}">
            Ошибка описания
        </div>
    </div>
    <div>
        <label for="price">Цена:</label>
        <input id="price" type="number" th:field="*{price}" required>
        <div th:if="${#fields.hasErrors('price')}" th:errors="*{price}">
            Ошибка цены
        </div>
    </div>
    <div>
        <label for="city">Город:</label>
        <select id="city" th:field="*{city}">
            <option value="">Вся страна</option>
            <option th:each="cityOpt : ${cities}" th:value="${cityOpt}" th:text="${cityOpt}" th:selected="${cityOpt == announcementRequest.city}"></option>
        </select>
        <div th:if="${#fields.hasErrors('city')}" th:errors="*{city}">
            Ошибка города
        </div>
    </div>
    <div>
        <label for="image1">Изображение 1:</label>
        <input id="image1" type="file" th:field="*{image1}">
    </div>
    <div>
        <label for="image2">Изображение 2:</label>
        <input id="image2" type="file" th:field="*{image2}">
    </div>
    <div>
        <label for="image3">Изображение 3:</label>
        <input id="image3" type="file" th:field="*{image3}">
    </div>
    <div>
        <input type="submit" value="Обновить">
    </div>
</form>
</body>
</html>